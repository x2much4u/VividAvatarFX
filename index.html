<artifact identifier="vafx-doc-v0-10-0" type="text/html" title="VividAvatarFX ドキュメント Ver.0.10.0">
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VividAvatarFX ドキュメント</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.7;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            overflow: hidden;
            display: flex;
            max-height: calc(100vh - 20px);
        }
        .sidebar {
            width: 280px;
            background: #f8f9fa;
            padding: 20px;
            overflow-y: auto;
            border-right: 2px solid #e9ecef;
            transition: transform 0.3s ease;
            flex-shrink: 0;
        }
        .sidebar h2 {
            color: #667eea;
            font-size: 1.2em;
            margin-bottom: 15px;
            border: none;
            padding: 0;
        }
        .sidebar-nav {
            list-style: none;
            margin: 0;
        }
        .sidebar-nav li {
            margin: 0;
        }
        .sidebar-nav a {
            display: block;
            padding: 8px 12px;
            color: #495057;
            text-decoration: none;
            border-radius: 5px;
            transition: all 0.3s;
            font-size: 0.9em;
        }
        .sidebar-nav a:hover {
            background: #e9ecef;
            color: #667eea;
        }
        .sidebar-nav a.active {
            background: #667eea;
            color: white;
            font-weight: bold;
        }
        .sidebar-subnav {
            list-style: none;
            margin: 5px 0 10px 0;
            padding-left: 15px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        .sidebar-subnav.active {
            max-height: 500px;
        }
        .sidebar-subnav a {
            padding: 6px 12px;
            font-size: 0.85em;
            color: #764ba2;
        }
        .sidebar-subnav a:hover {
            background: #f0e7f5;
            color: #764ba2;
        }
        .sidebar-subnav a.active {
            background: #e9d5f5;
            color: #764ba2;
            font-weight: bold;
            border-left: 3px solid #764ba2;
            padding-left: 9px;
        }
        .hamburger {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 15px;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        .hamburger span {
            display: block;
            width: 25px;
            height: 3px;
            background: white;
            margin: 5px 0;
            transition: 0.3s;
        }
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
        .overlay.active {
            display: block;
        }
        .main-content {
            flex: 1;
            overflow-y: auto;
        }
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }
        header h1 {
            font-size: 2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            word-break: break-word;
        }
        header p {
            font-size: 1em;
            opacity: 0.9;
        }
        .content {
            padding: 20px;
        }
        h2 {
            color: #667eea;
            margin: 30px 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
            font-size: 1.5em;
        }
        h3 {
            color: #764ba2;
            margin: 25px 0 10px 0;
            font-size: 1.2em;
        }
        h4 {
            color: #667eea;
            margin: 15px 0 10px 0;
            font-size: 1.1em;
        }
        .step {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .step-number {
            display: inline-block;
            background: #667eea;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            font-weight: bold;
            margin-right: 8px;
            font-size: 0.9em;
        }
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .info {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #e83e8c;
            word-break: break-all;
            font-size: 0.9em;
        }
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
        }
        ul, ol {
            margin: 15px 0 15px 20px;
        }
        li {
            margin: 8px 0;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .feature-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
        }
        .feature-card h4 {
            margin-top: 0;
            margin-bottom: 8px;
            font-size: 1em;
        }
        .feature-card p {
            font-size: 0.9em;
        }
        footer {
            background: #2d2d2d;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            font-size: 0.9em;
        }
        .toc {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .toc ul {
            list-style: none;
            margin-left: 0;
        }
        .toc a {
            color: #667eea;
            text-decoration: none;
        }
        .toc a:hover {
            text-decoration: underline;
        }
        .future-section {
            border-top: 3px solid #e83e8c;
            margin-top: 40px;
            padding-top: 30px;
        }
        .future-section h2 {
            color: #e83e8c;
            border-bottom-color: #e83e8c;
        }
    @media (max-width: 900px) {
        .hamburger {
            display: block;
        }
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            transform: translateX(-100%);
            z-index: 1000;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
        }
        .sidebar.active {
            transform: translateX(0);
        }
        .container {
            flex-direction: column;
        }
        .main-content {
            height: auto;
            width: 100%;
        }
        header h1 {
            font-size: 1.5em;
        }
        h2 {
            font-size: 1.3em;
        }
        h3 {
            font-size: 1.1em;
        }
        .content {
            padding: 15px;
            padding-top: 60px;
        }
        .feature-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const sections = document.querySelectorAll('h2[id], h3[id]');
        const navLinks = document.querySelectorAll('.sidebar-nav > li > a');
        const allNavLinks = document.querySelectorAll('.sidebar-nav a');
        const subNavs = document.querySelectorAll('.sidebar-subnav');
        const mainContent = document.querySelector('.main-content');
        const hamburger = document.querySelector('.hamburger');
        const sidebar = document.querySelector('.sidebar');
        const overlay = document.querySelector('.overlay');
        
        console.log('Total sections found:', sections.length);
        sections.forEach(s => console.log(s.tagName, s.id, s.offsetTop));
        
        if (hamburger) {
            hamburger.addEventListener('click', function() {
                sidebar.classList.toggle('active');
                overlay.classList.toggle('active');
            });
        }
        
        if (overlay) {
            overlay.addEventListener('click', function() {
                sidebar.classList.remove('active');
                overlay.classList.remove('active');
            });
        }
        
        allNavLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                if (window.innerWidth <= 900) {
                    sidebar.classList.remove('active');
                    overlay.classList.remove('active');
                }
            });
        });
        
        function setActiveLink() {
            const scrollPosition = mainContent.scrollTop;
            const allSections = Array.from(sections);
            
            let currentSection = '';
            let currentMainSection = '';
            
            for (let i = allSections.length - 1; i >= 0; i--) {
                const section = allSections[i];
                const rect = section.getBoundingClientRect();
                const mainRect = mainContent.getBoundingClientRect();
                const relativeTop = rect.top - mainRect.top + scrollPosition;
                
                if (scrollPosition >= relativeTop - 100) {
                    currentSection = section.getAttribute('id');
                    
                    if (section.tagName === 'H2') {
                        currentMainSection = currentSection;
                        break;
                    } else if (section.tagName === 'H3') {
                        for (let j = i - 1; j >= 0; j--) {
                            if (allSections[j].tagName === 'H2' && allSections[j].id) {
                                currentMainSection = allSections[j].id;
                                break;
                            }
                        }
                        break;
                    }
                }
            }
            
            console.log('Scroll:', scrollPosition, 'Current:', currentSection, 'Main:', currentMainSection);
            
            subNavs.forEach(subnav => {
                subnav.classList.remove('active');
            });
            
            allNavLinks.forEach(link => {
                link.classList.remove('active');
            });
            
            navLinks.forEach(link => {
                const href = link.getAttribute('href').substring(1);
                
                if (href === currentMainSection) {
                    link.classList.add('active');
                    
                    const parentLi = link.parentElement;
                    const subnav = parentLi.querySelector('.sidebar-subnav');
                    if (subnav) {
                        subnav.classList.add('active');
                        
                        const subLinks = subnav.querySelectorAll('a');
                        subLinks.forEach(subLink => {
                            const subHref = subLink.getAttribute('href').substring(1);
                            if (subHref === currentSection) {
                                subLink.classList.add('active');
                                console.log('Activating sublink:', subHref);
                            }
                        });
                    }
                }
            });
        }
        
        if (mainContent) {
            mainContent.addEventListener('scroll', setActiveLink);
        }
        
        setActiveLink();
    });
</script>
</head>
<body>
    <button class="hamburger" aria-label="メニューを開く">
        <span></span>
        <span></span>
        <span></span>
    </button>
    <div class="overlay"></div>
<div class="container">
    <aside class="sidebar">
        <h2>目次</h2>
        <ul class="sidebar-nav">
            <li>
                <a href="#quickstart">クイックスタート</a>
            </li>
            <li>
                <a href="#overview">概要</a>
                <ul class="sidebar-subnav">
                    <li><a href="#overview-features">主な機能</a></li>
                </ul>
            </li>
            <li>
                <a href="#adjustment">エフェクトの調整方法</a>
                <ul class="sidebar-subnav">
                    <li><a href="#adjustment-editor">マテリアルエディタから調整</a></li>
                    <li><a href="#adjustment-params">主要なパラメータ</a></li>
                </ul>
            </li>
            <li>
                <a href="#preset">プリセット機能</a>
                <ul class="sidebar-subnav">
                    <li><a href="#preset-register">プリセットの登録</a></li>
                    <li><a href="#preset-load">プリセットの読み込み</a></li>
                    <li><a href="#preset-export">エクスポート機能</a></li>
                </ul>
            </li>
            <li>
                <a href="#technical">技術仕様</a>
            </li>
            <li>
                <a href="#faq">よくある質問</a>
            </li>
            <li>
                <a href="#license">ライセンス情報</a>
            </li>
            <li>
                <a href="#future">予定されている修正・追加機能</a>
                <ul class="sidebar-subnav">
                    <li><a href="#future-range">影響範囲の調整可視化の改善</a></li>
                    <li><a href="#future-menu">メニューUI/UXの改善</a></li>
                    <li><a href="#future-lang">日本語/英語Prefabの分離</a></li>
                </ul>
            </li>
        </ul>
    </aside>
    
    <div class="main-content">
    <header>
        <h1>VividAvatarFX</h1>
        <p>VRChat想定アバターギミック #VAFX</p>
    </header>

    <div class="content">
        4<h3>ドキュメントの最終更新 : 2025/10/04 - 21:36</h3>
        <h3>最新パッケージ : Ver.0.12.0</h3>
        <p>更新は　<a href="https://drive.google.com/drive/folders/1N19suPlQQrEgIFD3m6_2mE1zWXPTNfZb?usp=sharing" target="_blank" style="color: #667eea; text-decoration: none;">ここ</a>　からDLできます。※テスターさん用、今だけ</p>
        <p></p>

        <h2 id="changelog">Changelog - Ver.0.12.0</h2>
        
        <div class="step">
            <span class="step-number">※</span>
            <strong>ある機能を追加しようと奮闘していましたが追加できませんでした。</strong>
            <p>バックアップを取っての作業をしていたため、こちらには影響ないかとは思いますが、かなり長時間やっていて、どこか破綻している可能性も0ではないため、今回のパッチでは特に注意深く見ていただけると幸いです。</p>
            <span class="step-number">1</span>
            <strong>ノイズ関連の不具合修正</strong>
            <p>ノイズ/グレインの種類がVRC内で変更できなかった不具合修正を修正しました。</p>
            <span class="step-number">2</span>
            <strong>色収差のカラバリ追加</strong>
            <p>色収差のずれ方に複数パターン追加しました。</p>
            <span class="step-number">3</span>
            <strong>JPPrefab / ENPrefabの分離</strong>
            <p>日本語Prefabと英語Prefabを用意しました。。</p>
        </div>
        
        <h2 id="changelog">Changelog - Ver.0.11.1</h2>
        
        <div class="step">
            <span class="step-number">1</span>
            <strong>ExMenuアイコン抜け補完</strong>
            <p>色反転がアイコン設定抜けていたため補完しました。</p>
        </div>
        
        <h2 id="changelog">Changelog - Ver.0.11.0</h2>
        
        <div class="step">
            <span class="step-number">1</span>
            <strong>ExMenuのアイコン追加</strong>
            <p>初期アイコンからちょっとだけかっこよくなりました。</p>
        </div>
        
        <div class="step">
            <span class="step-number">2</span>
            <strong>ビネット関係修正</strong>
            <li>ビネット強度が0でOFFにならなくなりました。</li>
            <li>ビネットの透明度が全体に影響を与えていたのを修正しました。</li>
        </div>

        <h2 id="changelog">Changelog - Ver.0.10.0</h2>
        
        <div class="step">
            <span class="step-number">1</span>
            <strong>VR,Desktop,Camera,Otherが正常に動作するように（FOV、解像度の依存がなくなった）</strong>
            <p>VRChatが提供するグローバル変数を使用することで、より正確な判定が可能になりました。</p>
        </div>
        
        <div class="step">
            <span class="step-number">2</span>
            <strong>プリセット登録時にVR,Desktop,Camera,Otherを選択可能、マテリアルの値よりこちらを優先するように</strong>
            <p>プリセット登録時に初期でONになる項目を変更できるようになりました。</p>
        </div>
        
        <div class="step">
            <span class="step-number">3</span>
            <strong>Presetの保存スロットを8 -> 22に拡張</strong>
            <p>より多くのプリセットを登録できるようになりました。メニューも3つに分割され、整理されています。</p>
        </div>
        
        <div class="step">
            <span class="step-number">4</span>
            <strong>GUI調整</strong>
        </div>
        
        <div class="step">
            <span class="step-number">5</span>
            <strong>影響範囲確認用マテリアルの調整</strong>
            <p>影響範囲の可視化がより見やすくなりました。</p>
        </div>
        
        <div class="step">
            <span class="step-number">6</span>
            <strong>内部処理の整備性向上</strong>
            <p>内部的な処理なのでユーザーの方には特に変更ないはずですが、プリセットやセットアップで不具合が出たら遠慮なく教えてください。</p>
        </div>
        
        <h2 id="quickstart">クイックスタート</h2>
        
        <div class="step">
            <span class="step-number">1</span>
            <strong>Prefabの配置</strong>
            <p><code>Assets/x2much4u/VividAvatarFX/Prefab/VividAvatarFX</code> をアバターの直下に配置</p>
        </div>

        <div class="step">
            <span class="step-number">2</span>
            <strong>Effectオブジェクトの選択</strong>
            <p>Prefab内の <code>VividAvatarFX/Effect</code> を選択してInspectorを表示</p>
        </div>

        <div class="step">
            <span class="step-number">3</span>
            <strong>Setup Toolの起動</strong>
            <p>以下のいずれかの方法でSetup Toolを開きます：</p>
            <ul>
                <li><strong>方法1:</strong> Inspector上部にある緑色の「セットアップ & ベイク」ボタンをクリック</li>
                <li><strong>方法2:</strong> Unityメニューバーから<br><code>Tools → x2much4u → VividAvatarFX → VAFX Setup Tool</code> を選択</li>
            </ul>
            <p>Setup Toolウィンドウが開きます。</p>
        </div>

        <div class="step">
            <span class="step-number">4</span>
            <strong>アバターの設定</strong>
            <p>Setup Tool内の「ターゲットアバター」欄にHierarchyから導入したいアバターをドラッグ&ドロップ</p>
        </div>

        <div class="step">
            <span class="step-number">5</span>
            <strong>ベイク実行</strong>
            <p>緑色の「マテリアル値を焼き込み & アバターに統合 (Bake & Merge)」ボタンをクリック</p>
        </div>

        <div class="success">
            <strong>セットアップ完了</strong>
            <p>これでVividAvatarFXの導入は完了です。</p>
        </div>

        <div class="info">
            <strong>なぜベイクが必要なのか？</strong>
            <p>VividAvatarFXは、MA（Modular Avatar）Parametersを使用していません。そのため、<strong>現在のマテリアルに設定されている値を直接アバターのExpressionParametersに焼き込む</strong>必要があります。</p>
            <p>ベイク処理で行われること：</p>
            <ul>
                <li>マテリアルの全プロパティ値をRadial Puppet用に0-1の範囲に正規化</li>
                <li>正規化された値をExpressionParametersのDefault値として設定</li>
                <li>VRCAvatarParameterDriverに初期値を記録</li>
                <li>アバターのExpressionParametersにVAFXパラメーターをマージ</li>
            </ul>
            <p>この仕組みにより、VRC内で値を変更可能になっています。</p>
        </div>

        <div class="warning">
            <strong>重要</strong>
            <p><strong>VAFXマテリアルの値</strong>を変更したら、必ず再度ベイクを行ってください。VRChat内で変更が反映されません。</p>
            <p><strong>※服や髪のマテリアルなど、VAFX以外のマテリアルの値を変更した場合は再度ベイクする必要はありません。</strong></p>
        </div>

        <h2>目次</h2>
        <div class="toc">
            <ul>
                <li><a href="#overview">概要</a></li>
                <li><a href="#adjustment">エフェクトの調整方法</a></li>
                <li><a href="#preset">プリセット機能</a></li>
                <li><a href="#technical">技術仕様</a></li>
                <li><a href="#faq">よくある質問</a></li>
                <li><a href="#license">ライセンス情報</a></li>
                <li><a href="#future">予定されている修正・追加機能</a></li>
            </ul>
        </div>

        <h2 id="overview">概要</h2>
        <p>VividAvatarFXは、VRChatアバターの視界に様々な視覚エフェクトを追加できるアバターギミックです。カラーグレーディング、グリッチエフェクト、レンズ歪み、ビネット、ブルームなど、多彩なエフェクトをVRC内で制御できます。</p>

        <h3 id="overview-features">主な機能</h3>
        <div class="feature-grid">
            <div class="feature-card">
                <h4>カラーグレーディング</h4>
                <p>明度、彩度、コントラスト、色相シフト、ガンマ調整</p>
            </div>
            <div class="feature-card">
                <h4>グリッチエフェクト</h4>
                <p>ラインシフト、カラー分離、ブロックノイズ</p>
            </div>
            <div class="feature-card">
                <h4>レンズエフェクト</h4>
                <p>レンズ歪み、色収差、ビネット</p>
            </div>
            <div class="feature-card">
                <h4>ポストプロセス</h4>
                <p>ブルーム、ノイズ、ディザリング、ポスタライズ</p>
            </div>
        </div>

        <h2 id="adjustment">エフェクトの調整方法</h2>

        <h3 id="adjustment-editor">マテリアルエディタから調整</h3>
        <p><code>Assets/x2much4u/VividAvatarFX/Material/VividAvatarFX.mat</code> を選択すると、Inspectorにカスタムエディタが表示されます。</p>

        <h3 id="adjustment-params">主要なパラメータ</h3>
        
        <h4>基本設定</h4>
        <ul>
            <li><strong>メインカラー (HSV+Alpha):</strong> エフェクト全体の基本色</li>
            <li><strong>全体の透明度:</strong> エフェクトの不透明度</li>
            <li><strong>表示設定:</strong> VR/デスクトップ/カメラ/その他での表示切り替え</li>
        </ul>

        <h4>カラーグレーディング</h4>
        <ul>
            <li><strong>明るさ/コントラスト/彩度:</strong> 基本的な色調整</li>
            <li><strong>色相シフト:</strong> 色の回転</li>
            <li><strong>ガンマ:</strong> 中間調の調整</li>
            <li><strong>トーンカーブ:</strong> RGB各チャンネルの詳細調整</li>
            <li><strong>Lift/Gamma/Gain:</strong> 映画のような色補正（シャドウ/ミッドトーン/ハイライト）</li>
        </ul>

        <h4>エフェクト</h4>
        <ul>
            <li><strong>ビネット:</strong> 画面端の暗化効果</li>
            <li><strong>シネマティックライン:</strong> 映画のような画面端の黒帯</li>
            <li><strong>ネオンエッジ:</strong> エッジ検出による発光</li>
            <li><strong>ノイズ/グレイン:</strong> フィルムグレイン効果</li>
            <li><strong>ブルーム:</strong> 明るい部分の発光</li>
            <li><strong>色収差:</strong> レンズの色ずれ</li>
            <li><strong>レンズ歪み:</strong> 魚眼効果、バレル/ピンクッション歪み</li>
            <li><strong>グリッチ:</strong> デジタルノイズ効果</li>
        </ul>

        <h2 id="preset">プリセット機能</h2>

        <h3 id="preset-register">プリセットの登録</h3>
        <p>現在のマテリアル設定をプリセットとして保存できます。</p>

        <div class="step">
            <span class="step-number">1</span>
            <strong>Preset Makerを起動</strong>
            <p>以下のいずれかの方法でPreset Makerを開きます：</p>
            <ul>
                <li><strong>方法1:</strong> マテリアルInspectorの「プリセット登録」ボタンをクリック</li>
                <li><strong>方法2:</strong> Unityメニューバーから<br><code>Tools → x2much4u → VividAvatarFX → VAFX Preset Maker</code> を選択</li>
            </ul>
            <p>PresetMakerウィンドウが開きます。</p>
            </div>

            <div class="step">
                <span class="step-number">2</span>
                <strong>プリセットスロット選択</strong>
                <p>Preset01〜Preset22のいずれかを選択します。</p>
            </div>

            <div class="step">
                <span class="step-number">3</span>
                <strong>表示名の入力</strong>
                <p>VRChatメニューに表示される名前を入力します。</p>
            </div>

            <div class="step">
                <span class="step-number">4</span>
                <strong>表示設定の選択（Ver.0.10.0の新機能）</strong>
                <p>プリセットごとに表示設定を個別に指定できます：</p>
                <ul>
                    <li><strong>Enable VR:</strong> VR視点で表示</li>
                    <li><strong>Enable Desktop:</strong> デスクトップ視点で表示</li>
                    <li><strong>Enable SS:</strong> カメラ撮影時に表示</li>
                    <li><strong>Enable Other:</strong> その他の場合に表示</li>
                </ul>
                <p>これらのチェックボックスで選択した設定は、マテリアルの値よりも優先されます。</p>
            </div>

            <div class="step">
                <span class="step-number">5</span>
                <strong>ベイク実行</strong>
                <p>緑色の「プリセット [名前] をベイク (Bake Preset)」ボタンをクリックします。</p>
            </div>

            <div class="info">
                <strong>プリセットの保存場所</strong>
                <p>プリセットは <code>Assets/x2much4u/VividAvatarFX/Preset/</code> にJSON形式で保存されます。このフォルダ内にサブフォルダを作成しても認識されます。</p>
            </div>

            <h3 id="preset-load">プリセットの読み込み</h3>
            <p>マテリアルInspectorの「プリセット」ドロップダウンから保存済みプリセットを選択し、「適用」ボタンをクリックすると設定が反映されます。</p>

            <div class="warning">
                <strong>注意</strong>
                <p>プリセットを適用しただけではVRChat内では変更されません。<br>適用後、必ずSetup ToolもしくはPreset Makerで保存してください。</p>
            </div>

            <h3 id="preset-export">エクスポート機能</h3>
            <p>マテリアルInspectorの「エクスポート」ボタンで、現在の設定をJSON形式で保存できます。</p>
            
            <div class="info">
                <strong>プリセット登録との違い</strong>
                <ul>
                    <li><strong>プリセット登録:</strong> AnimatorControllerに設定を書き込み、VRChatメニューから切り替え可能にする</li>
                    <li><strong>エクスポート:</strong> 設定をJSONファイルとして出力するだけ（共有用）</li>
                </ul>
                <p>他の人に設定を共有したい場合は、エクスポートが便利です。</p>
            </div>

            <h2 id="technical">技術仕様</h2>

            <h3>パラメーターの正規化</h3>
            <p>VRChatのRadial Puppetで使用するため、全てのパラメーターは0〜1の範囲に正規化されます。</p>
            
            <div class="code-block">
                例: ToneCurveRedScale (0-10) → 正規化 (0-1)<br>
                正規化値 = 元の値 / 10.0<br>
                例: LensDistortionBarrel (-1 to 1) → 正規化 (0-1)<br>
                正規化値 = (元の値 + 1.0) / 2.0
            </div>

            <h2 id="faq">よくある質問</h2>

            <h3>Q: Ver.0.10.0で何が変わったの？表示設定の動作について</h3>
            <p><strong>A:</strong> Ver.0.10.0では、EnableDesktop、EnableVR、EnableSS、EnableOtherの判定ロジックが大幅に改善されました。</p>

            <h4>【Ver.0.9.4以前の問題点】</h4>
            <ul>
                <li><strong>デスクトップ判定:</strong> FOV（視野角）が60°かどうかを厳密にチェックしていたため、FOVを少しでも変更していると判定に失敗していました</li>
                <li><strong>カメラ判定:</strong> 解像度（1920x1080、1280x720、3840x2160）だけで判定していたため、デスクトップのフルスクリーンでも誤ってカメラと判定されることがありました</li>
                <li><strong>その他の判定:</strong> 上記のどれにも該当しない場合に「その他」として扱われていました</li>
            </ul>

            <h4>【Ver.0.10.0での改善点】</h4>
            <p>VRChatが提供する<strong>グローバル変数</strong>を使用することで、より正確な判定が可能になりました：</p>
            <ul>
                <li><strong>_VRChatCameraMode:</strong> VRChatのカメラモードを直接取得できるようになりました</li>
                <li><strong>_VRChatMirrorMode:</strong> ミラー内かどうかを正確に判定できるようになりました</li>
                <li><strong>FOV依存の解消:</strong> FOVを変更していてもデスクトップ判定が正しく動作するようになりました</li>
                <li><strong>解像度依存の解消:</strong> フルスクリーンでも誤ってカメラと判定されることがなくなりました</li>
            </ul>

            <div class="info">
                <strong>判定の優先順位（Ver.0.10.0）</strong>
                <ol>
                    <li><strong>EnableOtherがON:</strong> すべての状況で表示（Unity Editorテスト用）</li>
                    <li><strong>オルソグラフィックカメラ or ミラー内:</strong> 表示しない</li>
                    <li><strong>パノラマモード:</strong> 表示しない</li>
                    <li><strong>VRChatカメラモード:</strong> EnableSSの設定に従う</li>
                    <li><strong>VR視点:</strong> EnableVRの設定に従う</li>
                    <li><strong>デスクトップ視点:</strong> EnableDesktopの設定に従う</li>
                </ol>
            </div>

            <h3>Q: デスクトップなのに「その他」でしか表示されない / デスクトップでONにならない</h3>
            <p><strong>A:</strong> Ver.0.10.0でカメラ判定ロジックが改善されましたが、それでも判定が失敗する場合があります：</p>
            <ul>
                <li>カメラを傾けるギミックや他の視界エフェクトを使用している</li>
                <li>他のシェーダーとの競合</li>
                <li>特殊なカメラ設定を使用している</li>
            </ul>
            <p><strong>解決方法:</strong></p>
            <ul>
                <li><strong>推奨：「EnableOther」をONにする</strong>（最も確実で簡単）</li>
                <li>カメラを傾けるギミックやエフェクトを無効化する</li>
                <li>他の視界エフェクトとの併用を見直す</li>
            </ul>

            <h3>Q: 「VRCのカメラに表示」のみONにしているのに、画面全体にエフェクトがかかる</h3>
            <p><strong>A:</strong> Ver.0.10.0でカメラ判定が改善され、この問題は大幅に解消されました。</p>

            <h4>【Ver.0.9.4以前の動作】</h4>
            <p>デスクトップでプレイ中、以下の条件で誤ってカメラと判定されていました：</p>
            <ul>
                <li>FOVが60°以外に設定されている</li>
                <li>かつ、解像度が1920x1080、1280x720、または3840x2160</li>
            </ul>
            <p>この場合、デスクトップ判定が失敗 → 解像度でカメラと誤認識 → EnableSSがONのためエフェクトが表示されていました。</p>

            <h4>【Ver.0.10.0での改善】</h4>
            <p>VRChatのグローバル変数<code>_VRChatCameraMode</code>を使用することで、カメラモードを直接判定できるようになりました。これにより：</p>
            <ul>
                <li>解像度やFOVに依存しない正確な判定が可能</li>
                <li>デスクトップでプレイ中にカメラと誤認識されることがほぼなくなりました</li>
            </ul>

            <p>それでも問題が発生する場合は：</p>
            <ul>
                <li><strong>推奨：ウィンドウモードにする</strong>（VRCをアクティブにした状態でAlt+Enter）</li>
                <li>表示設定を個別に調整する</li>
            </ul>

            <h3>Q: エフェクトが表示されない</h3>
            <p><strong>A:</strong> 以下を確認してください:</p>
            <ul>
                <li>Setup Toolでベイクを実行したか</li>
                <li>表示設定（EnableVR/EnableDesktop等）が有効になっているか</li>
                <li>マテリアルが正しくシェーダー <code>x2much4u/VividAvatarFX</code> を使用しているか</li>
                <li><strong>影響範囲外までカメラが行っていないか</strong></li>
            </ul>
            
            <div class="info">
                <strong>影響範囲について</strong>
                <p>VividAvatarFXでは、<strong>Cubeが視界に入っていないとエフェクトが適用されません。</strong></p>
                <p>これはシェーダーの仕組み上、エフェクトを描画するためのオブジェクトが画面内に存在する必要があるためです。</p>
            </div>

            <h4>影響範囲の調整方法</h4>
            <p>Cubeの大きさは以下の手順で調整できます：</p>
            <div class="step">
                <strong>ExMenuから調整</strong>
                <p><code>メインメニュー → 視点設定 → 影響範囲</code> から調整できます。</p>
            </div>

            <div class="warning">
                <strong>影響範囲を大きくしすぎないでください</strong>
                <p>「スケールを9999にすればすべてカバーできるのでは？」と思うかもしれませんが、<strong>フォールバック時に不透過のCubeが出現してしまいます。</strong></p>
                <p>フォールバックとは、シェーダーが正常に動作しない環境（古いグラフィックボード、モバイルなど）で表示される代替表示のことです。この場合、巨大な不透過のキューブがワールドに出現し、視界を完全に遮ってしまいます。</p>
                <p><strong>設定値について：</strong></p>
                <ul>
                    <li><strong>デフォルト：</strong> スケール 3</li>
                    <li><strong>最大値：</strong> スケール 20（アニメーション側で制限されています）</li>
                </ul>
                <p>デフォルトのスケール3で十分カバーできるかと思いますが、もう少し影響範囲を広げたい場合は段階的に調整してください。</p>
            </div>

            <div class="info">
                <strong>影響範囲の確認方法</strong>
                <p><code>メインメニュー → 視点設定 → 影響範囲可視化</code> をONにすると、マテリアルが置き換わり、<strong>半透明の水色のキューブ</strong>になります。</p>
                <p>この状態で影響範囲のスケールを調整すると、実際にどのくらいの範囲がカバーされているかを視覚的に確認できます。</p>
                <p><strong>⚠️ 調整が終わったら、必ず影響範囲可視化をOFFに戻してください。</strong>ONのままだとエフェクトが表示されず、水色のキューブが見えたままになります。</p>
            </div>

            <h3>Q: パラメーター数が多い為、圧迫が心配</h3>
            <p><strong>A:</strong> VividAvatarFXのパラメータは同期設定を取らない（networkSynced: false）ため、ExpressionParametersの容量を消費しません。<br>つまり実質的な<strong>使用ExpressionParameters数は0</strong>です。<br>このギミックではExpressionParametersの枠を圧迫しないため、他のギミックと容量を競合することなく使用できます。</p>

            <h3>Q: プリセットが読み込まれない</h3>
            <p><strong>A:</strong> <code>Assets/x2much4u/VividAvatarFX/Preset/</code> フォルダにJSONファイルが存在するか確認してください。サブフォルダ内でも認識されます。</p>

            <h3>Q: いろいろ触ってたら分からなくなった、設定を元に戻したい</h3>
            <p><strong>A:</strong> マテリアルInspector右上の <strong>⁝</strong>から、<strong>Reset</strong>を押すと、マテリアルInspectorがシェーダーの初期値になります。</p>

            <h2 id="license">ライセンス情報</h2>

            <h3>VividAvatarFX本体</h3>
            <p>VividAvatarFX本体は<strong>VN3 License Ver.2.0.1</strong>のもとで配布されています。</p>
            
            <div class="info">
                <strong>主要な利用条件</strong>
                <ul>
                    <li><strong>営利目的での利用：</strong>可能</li>
                    <li><strong>商用利用：</strong>可能</li>
                    <li><strong>再配布：</strong>禁止</li>
                    <li><strong>JSONファイル（プリセット設定）の配布：</strong>許可（特記事項により）</li>
                </ul>
                <p><strong>詳細な利用規約は製品に同梱されているVN3ライセンス全文を必ずご確認ください。</strong></p>
                <p><a href="https://drive.google.com/drive/folders/1iJT_2lE_kOlim-YSXlYpvrK9QJp19qWB" target="_blank" style="color: #667eea; text-decoration: none; font-weight: bold;">→ VN3ライセンス全文をここからも確認できます。</a></p>
            </div>
            
            <div class="code-block">
            VividAvatarFX<br>
            Copyright (c) 2025 ゴンリー (x2much4u)<br>
            VN3 License Ver.2.0.1
            </div>
        </div>

        <div class="content future-section">
            <h2 id="future">予定されている修正・追加機能</h2>
            
            <div class="info">
                <strong>開発中の機能</strong>
                <p>以下の機能が実装予定です。実装時期は未定ですが、順次対応していきます。</p>
            </div>

            <h3 id="future-lang">1. 一旦終了</h3>
            <div class="step">
                <strong>予定されていた開発が全て完了しました。</br>テスターの皆様ありがとうございました！</br>後はインスペクターの表示を少し調整するぐらいかと思われます。</strong>
                <ul><p>もし不具合があれば優先しますのでお気軽にお願いします！</p></ul>
            </div>

            <div class="warning">
                <strong>注意事項</strong>
                <p>これらの機能は予定であり、実装時期や仕様は変更される可能性があります。また、実装優先度は開発状況やユーザーからのフィードバックによって変動する場合があります。</p>
            </div>

            <div class="info">
                <strong>フィードバックについて</strong>
                <p>これらの機能に関するご意見やご要望がありましたら、ぜひお聞かせください。皆様からのフィードバックは、より良い製品づくりに役立てさせていただきます。</p>
            </div>
        </div>

        <footer>
            <p>&copy; 2025 ゴンリー (x2much4u) - VividAvatarFX</p>
            <p>VRChat想定アバターギミック #VAFX</p>
            <p><a href="https://x2much4u.booth.pm/" target="_blank" style="color: #667eea; text-decoration: none;">https://x2much4u.booth.pm/</a></p>
        </footer>
        </div>
    </div>
</body>
</html>
